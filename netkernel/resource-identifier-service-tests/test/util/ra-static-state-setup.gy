import org.netkernel.layer0.nkf.INKFRequestContext
import org.netkernel.layer0.nkf.INKFResponse
import com.jayway.restassured.RestAssured
import com.jayway.restassured.parsing.Parser

INKFRequestContext context = context

// These values are stored in an XML file parsed by the res:/svcconfig resource, they
// correspond to the REST Assured properties described at: https://code.google.com/p/rest-assured/wiki/Usage#Default_values
RestAssured.baseURI = context.source ("res:/svcconfig/baseURI")
RestAssured.port = context.source ("res:/svcconfig/port", Integer.class)
RestAssured.basePath = context.source ("res:/svcconfig/basePath")

RestAssured.registerParser ("application/vnd.overstory.error+xml", Parser.XML);
RestAssured.registerParser ("application/vnd.overstory.meta.id+xml", Parser.XML);

resp = context.createResponseFrom ("")
resp.setExpiry (INKFResponse.EXPIRY_ALWAYS)
