import org.netkernel.layer0.nkf.INKFRequestContext
import uk.co.overstory.xml.NsDocBuilderFactory;

// Defunct: delete me

String DOC_BUILDER_FACTORY_PROPERTY = 'javax.xml.parsers.DocumentBuilderFactory'
String DOC_BUILDER_FACTORY_HOLD_PROPERTY = DOC_BUILDER_FACTORY_PROPERTY + '.hold'

INKFRequestContext context = context

println ("Enter setup")


if ((System.getProperty (DOC_BUILDER_FACTORY_PROPERTY) != null) && (System.getProperty (DOC_BUILDER_FACTORY_HOLD_PROPERTY) == null)) {
  System.setProperty (DOC_BUILDER_FACTORY_HOLD_PROPERTY, System.getProperty (DOC_BUILDER_FACTORY_PROPERTY))
}

System.setProperty (DOC_BUILDER_FACTORY_PROPERTY, NsDocBuilderFactory.class.getName())

context.createResponseFrom (System.getProperty (DOC_BUILDER_FACTORY_HOLD_PROPERTY))

println ("Exit setup")
